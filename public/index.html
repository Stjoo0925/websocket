<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>실시간 웹소켓 채팅</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <!-- 로그인 모달 -->
      <div id="loginModal" class="modal">
        <div class="modal-content">
          <h2>채팅방 입장</h2>
          <input
            type="text"
            id="usernameInput"
            placeholder="사용자 이름을 입력하세요"
            maxlength="20"
          />
          <button id="joinBtn">입장하기</button>
        </div>
      </div>

      <!-- 채팅 인터페이스 -->
      <div id="chatContainer" class="chat-container" style="display: none">
        <div class="chat-header">
          <h1>실시간 채팅</h1>
          <div class="user-info">
            <span id="currentUser"></span>
            <span id="userCount" class="user-count">접속자: 0명</span>
          </div>
        </div>

        <div class="chat-messages" id="messages">
          <!-- 메시지들이 여기에 추가됩니다 -->
        </div>

        <div class="typing-indicator" id="typingIndicator"></div>

        <div class="chat-input">
          <input
            type="file"
            id="imageInput"
            accept="image/*"
            style="display: none"
          />
          <button id="imageBtn" class="image-btn" title="이미지 업로드">
            📷
          </button>
          <input
            type="text"
            id="messageInput"
            placeholder="메시지를 입력하세요..."
            maxlength="500"
          />
          <button id="sendBtn">전송</button>
        </div>

        <!-- 이미지 미리보기 모달 -->
        <div id="imagePreviewModal" class="modal" style="display: none">
          <div class="modal-content image-preview-content">
            <h3>이미지 미리보기</h3>
            <img
              id="previewImage"
              src=""
              alt="미리보기"
              style="max-width: 100%; max-height: 300px"
            />
            <div class="preview-actions">
              <button id="cancelImageBtn">취소</button>
              <button id="sendImageBtn">전송</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
  </body>
</html>
